 <header>
  <nav class="navbar navbar-inverse navbar-embossed" role="navigation">

  <div class="container-fluid">

    <div class="navbar-header col-sm-2">
      <!-- <a class="navbar-brand" href="#">has stuff</a> -->
      <div class="row logo" style="padding-bottom: 0px; margin-bottom: 0px;">
        <a href="/"><img src="/assets/logo.png"></a>
      </div>
<!--       <div class="row" style="padding-top: 0px; margin-top: -15px; color: white;">
        <span class="tagline" style="font-size: 10px; color: #F0F8FF">for students. by students.</span>
      </div> -->
    </div>


    <div class="col-sm-7 search-container" id="bs-example-navbar-collapse-1">
      <form class="navbar-form" role="search">
        <div class="form-group col-sm-10">
          <input type="text" class="form-control" id="search-box" placeholder="Search by title or author" style="width: 100%">
        </div>
        <button type="submit" class="btn btn-primary search">Search</button>
      </form>
    </div>

    <% if current_user %>
      <ul class="nav navbar-nav navbar-right session-options">
        <li><a href="" data-toggle="modal" data-target="#sign-in">Hello <%= current_user.name %></a>
        </li>
        <!-- <li class="divider-vertical"></li> -->
        <!-- <li><a href="" data-toggle="modal" data-target="#sign-up">Sign Up</a> -->
        <!-- </li> -->
        <li>
          <%= link_to("Sign Out", destroy_user_session_path, :method => :delete)  %>
        </li>
      </ul>
    <% else %>
    <ul class="nav navbar-nav navbar-right session-options">
      <li><a href="" data-toggle="modal" data-target="#sign-in">Sign In</a>
      </li>
      <li class="divider-vertical"></li>
      <li><a href="" data-toggle="modal" data-target="#sign-up">Sign Up</a>
      </li>
    </ul>
    <% end %>

    
  </nav>
</header>



<div class="modal fade" id="sign-up" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">Sign Up</h4>
        Create an account with us for a better experience.
      </div>
      <div class="modal-body">

        <form method="get" class="form-horizontal signup-form">

          <div class="form-group name">
            <label class="col-sm-3 control-label">Name</label>
            <div class="col-sm-9">
              <input type="text" class="form-control">
            </div>
          </div>
          <div class="form-group mobile">
            <label class="col-sm-3 control-label">Mobile</label>
            <div class="col-sm-9">
              <input type="text" class="form-control">
            </div>
          </div>
          <div class="form-group password">
            <label class="col-sm-3 control-label">Password</label>
            <div class="col-sm-9">
              <input type="password" class="form-control">
            </div>
          </div>
          <div class="form-group email">
            <label class="col-sm-3 control-label">Email</label>
            <div class="col-sm-9">
              <input type="text" class="form-control">
            </div>
          </div>
          <div class="form-group branch">
            <label class="col-sm-3 control-label">Branch</label>
            <div class="col-sm-9">
              <input type="text" class="form-control">
            </div>
          </div>
          <div class="form-group year">
            <label class="col-sm-3 control-label">Year</label>
            <div class="col-sm-9">
              <input type="text" class="form-control">
            </div>
          </div>
          <div class="form-group college-id">
            <label class="col-sm-3 control-label">College ID No.</label>
            <div class="col-sm-9">
              <input type="text" class="form-control">
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary">Submit</button>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="sign-in" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">Sign In</h4>
        Sign in for a better experience.
      </div>
      <div class="modal-body">

        <form method="get" class="form-horizontal signup-form">

          <div class="form-group name">
            <label class="col-sm-3 control-label">Mobile</label>
            <div class="col-sm-9">
              <input type="text" class="form-control">
            </div>
          </div>
          <div class="form-group email">
            <label class="col-sm-3 control-label">Password</label>
            <div class="col-sm-9">
              <input type="password" class="form-control">
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary">Submit</button>
      </div>
    </div>
  </div>
</div>


<script type="text/javascript">
$(document).ready(function () {

  $("#search-box").autocomplete({
    source: get_results_books,
    minLength: 2,
    select: function (event, ui) {

              params = { book_id : ui.item.book.id};
              $.get("/classifieds", params, function (data) {
                var page = $(".results", data);
                var results = $(page).html();
                $(".results").html($(page).html());
              });              
            }
  })
  .data("ui-autocomplete")._renderItem = function (ul, item) {
    $(".ui-corner-all").removeClass("ui-corner-all");
    var url = item.book.title;
    return $("<li>")
                    .append("<a class='cf-link' href=" + '/search/classifieds/' + url + "><img src=" + item.image_url + "></img>" + 
                      "<div style='display: inline-block;'> <span class=title><span class=search-term></span>" + item.book.title + "</span> <br />" +
                            // "<p class=edition>" + item.book.edition +"</p>" +
                            "<span class=author>" + item.book.author + "</span>, " +
                            "<span class=publisher>" + item.book.publisher + " Publications </span>" +
                      "</div></a>").appendTo(ul);
  };

  function get_results_books(request, response) {
    console.log(request.term)
    var params = {
      keywords: request.term
    };
    $.get("/search/books/", params, function (data) {
      console.log(data)
      response(data);
    }, "json");
  }


  function get_results_clsfds(keywords) {
    console.log(keywords);
    var params = { keywords: keywords };
    console.log(params);
  }


});

</script>