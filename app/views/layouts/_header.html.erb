 <header>
  <nav class="navbar navbar-inverse navbar-embossed navbar-fixed-top" role="navigation">

  <div class="container-fluid">

    <div class="navbar-header col-sm-1">
      <div class="row logo" style="padding-bottom: 0px; margin-bottom: 0px;">
        <%= link_to image_tag('logo.png'), root_path %>
      </div>
    </div>


    <div class="col-sm-6 search-container" id="bs-example-navbar-collapse-1">
      <form class="navbar-form" role="search">
        <div class="form-group col-sm-9">
          <input type="text" class="form-control" id="search-navbar" autocomplete="off" placeholder="Search by title or author" style="width: 100%">
        </div>
        <button type="submit" class="btn btn-info search submit">Search</button>
      </form>
    </div>

    <div class="col-sm-2 search-container" id="bs-example-navbar-collapse-1">
      <form class="navbar-form" role="search" action="/classifieds/new">
        <div class="form-group">
          <a href="/classifieds/new" class="btn btn-success search post" style="padding-left: 50px; padding-right: 50px;">
            Post Ad
          </a>
        </div>
      </form>
    </div>

    <% if current_user %>
      <ul class="nav navbar-nav navbar-right session-options">
        <li><a href="">Hello <%= current_user.name %></a>
        </li>
        <li>
          <%= link_to("Sign Out", destroy_user_session_path, :method => :delete)  %>
        </li>
      </ul>
    <% else %>
    <ul class="nav navbar-nav navbar-right session-options">
      <li><a href="" data-toggle="modal" data-target="#sign-in" id="sign-in-link">Sign In</a>
      </li>
      <li class="divider-vertical"></li>
      <li><a href="" data-toggle="modal" data-target="#sign-up" id="sign-up-link">Sign Up</a>
      </li>
    </ul>
    <% end %>

    
  </nav>
</header>



<script type="text/javascript">
$(document).ready(function () {

  var $search  = $("input#search-navbar");

  $search.on("keypress", function(e) {
    if (e.which == 13) { 
      e.preventDefault();
      get_results();
    }
  });

  $("form.navbar-form button.submit").on("click", function(e) {
    e.preventDefault();
    get_results();
  });

  var get_results = function() {
    var search_term = $search.val();
    if (search_term.length > 2) {
      var params      = { query : search_term }; 
      $.get("/classifieds/", params, function(data) {
        var results = $("div.results", data).html();
        $("div.results").html(results);
      });
      $search.val("");
    }
  };


  $("#sign-in-link").on('click', function(e) {
    e.preventDefault();
    $.get("/users/sign_in", function (data) {
      var $sign_in_page_partial = $( "div#sign-in", data );
      console.log(data);
      $("body").append($sign_in_page_partial);
      $("#sign-in").modal();
    });  
  });


  $("#sign-up-link").on('click', function(e) {
    e.preventDefault();
    $.get("/users/sign_up", function (data) {
      var $sign_up_page_partial = $( "div#sign-up", data );
      console.log( $sign_up_page_partial.html() );
      $("body").append($sign_up_page_partial);
      $("#sign-up").modal();
    });  
  });


  $("body").on('click', "div#sign-in .submit", function(e) {
    $("form.sign-in-form").submit();

  });

  $("body").on('click', "div#sign-up .submit", function(e) {
    $("form.sign-up-form").submit();
  });

});

</script>